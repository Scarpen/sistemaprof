<h1>Listando Minhas Disciplinas</h1>

<table>
  <tr>
    <th>Nome</th>
    <th>Conteudo</th>
    
    
  
  <% if current_user.type?("Aluno")  %>
    <th>Professor</th>
    <th>Situação</th>
    </tr>
    <% current_user.diciplinasAlunos.each do |c| %>
      <tr>
        <% diciplina = Diciplina.find(c.diciplina_id) %>
      <td> <%= diciplina.nome %> </td>
      <td> <%= diciplina.conteudo %> </td>
      <td> <%= Professor.find(diciplina.professor_id).nome %> </td>
      <%if c.situacao == 1 %>
       <td> Aguardando aprovação do Professor </td> 
      <%elsif c.situacao == 2 %>
       <td> Inscrição Completa </td> 
      <% end %>
      <td><%= link_to 'Mostrar', diciplina %></td>
      </tr>
    <% end %>
    
  <%end%>
<% @diciplinas.each do |diciplina| %>
  <% if current_user.type?("Professor")  %>
    <% if diciplina.professor_id == current_user.id %>
       <tr>
        <td><%= diciplina.nome %></td>
        <td><%= diciplina.conteudo %></td>
        <td><%= link_to 'Mostrar', diciplina %></td>
        <td><%= link_to 'Editar', edit_diciplina_path(diciplina) %></td>
        <td><%= link_to 'Apagar', diciplina, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <%end%>
  <%end%>

<% end %>
</table>

<br />
